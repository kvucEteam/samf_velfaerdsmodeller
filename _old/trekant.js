function poseQuestion(e,r){drawTriangle(.75,.43),areasPct.start={civil:venstre_pct,marked:hojre_pct,stat:top_pct},cordStart=[.75,.43],draw_draggable(),e<jsonData.spm_tiltag.length&&(console.log("poseQuestion - runde: "+e),$(".opgave_header").html("<b>Hvilken sektor i velfærdstrekanten bliver større og hvilken bliver mindre?</b> "),$(".opgave_broedtxt").html('<span class="opgTekst">"'+jsonData.spm_tiltag[e].spm+'"</span><br> <br>Flyt den grønne cirkel på modellen.'),e!=runde_old&&$(".opgTekst").hide().fadeIn(600),runde_old=studerendeHarSvaretKorrekt?e:runde_old)}function drawTriangle(e,r){canvas_height=$("#myCanvas").height(),canvas_width=$("#myCanvas").width(),ratio=canvas_width/2/canvas_height,triangle&&triangle.remove(),toppos_px=e*canvas_height,leftpos_px=r*canvas_width,top=new Path,top.add(new Point(.5*canvas_width,0)),top.add(new Point(.5*canvas_width-toppos_px*ratio,canvas_height*e)),top.add(new Point(.5*canvas_width+toppos_px*ratio,canvas_height*e)),top.closed=!0,venstre=new Path,venstre.add(new Point(.5*canvas_width-toppos_px*ratio,canvas_height*e)),venstre.add(new Point(0,canvas_height)),venstre.add(new Point(leftpos_px,canvas_height)),venstre.add(new Point(leftpos_px,toppos_px)),venstre.closed=!0,hojre=new Path,hojre.add(new Point(canvas_width,canvas_height)),hojre.add(new Point(.5*canvas_width+toppos_px*ratio,canvas_height*e)),hojre.add(new Point(leftpos_px,toppos_px)),hojre.add(new Point(leftpos_px,canvas_height)),hojre.closed=!0,triangle=new Group([top,venstre,hojre]),triangle.strokeColor=new Color(1,1,1,.7),triangle.strokeWidth=3;var t=Math.abs(top.area),s=Math.abs(venstre.area),n=Math.abs(hojre.area),i=t+s+n;top_pct=Math.round(t/i*100),venstre_pct=Math.round(s/i*100),hojre_pct=Math.round(n/i*100),triangle.fillColor=new Color(top_pct/100,venstre_pct/100,hojre_pct/100,.35)}function draw_draggable(){function e(e,r,t){var s=0,n=canvas_height-r<t+s?canvas_height-r-s:t,i=canvas_width-e<t+s?canvas_width-e-s:t,a=n<i?n:i;return console.log("responsiveRadius - rh: "+n+", rw: "+i+", r: "+a),a}crosshair&&crosshair.remove(),crosshair_clone&&crosshair_clone.remove(),streg&&streg.remove(),dragarea=new Path.Circle({center:[leftpos_px,toppos_px],radius:e(leftpos_px,toppos_px,100),fillColor:new Color(1,1,1,.4),strokeWidth:4}),crosshair=new Path.Circle({center:[leftpos_px,toppos_px],radius:20,fillColor:"white",strokeWidth:4}),crosshair.strokeColor=new Color("#1AA0A7"),crosshair.fillColor=new Color(1,1,1,.4),crosshair_clone&&crosshair_clone.remove(),crosshair_clone=crosshair.clone(),crosshair_clone.scale(.2),crosshair_clone.strokeColor=new Color("#aaa"),crosshair_clone.sendToBack(),crosshair.onMouseDrag=function(e){$(".microhint").remove();var r={segments:!0,stroke:!0,fill:!0,tolerance:5},t=dragarea.hitTestAll(e.point,r);if(t.length>0){crosshair.position+=e.delta,pct_height=crosshair.position.y/canvas_height,pct_width=crosshair.position.x/canvas_width,crosshair_xpos=crosshair.position.x,crosshair_ypos=crosshair.position.y,streg&&streg.remove();var s=new Point(crosshair_clone.position.x,crosshair_clone.position.y),n=new Point(crosshair_xpos,crosshair_ypos);streg=new Path.Line(s,n),streg.dashArray=[5,5],streg.strokeColor="#bbb",streg.strokeWidth=3,triangle.remove(),drawTriangle(pct_height,pct_width),areasPct.end={civil:venstre_pct,marked:hojre_pct,stat:top_pct},cordEnd=[pct_height,pct_width],crosshair.bringToFront(),dragarea.bringToFront()}else crosshair.onMouseDrag.off()},crosshair.onMouseUp=function(e){streg.length>40?tjeksvar2():crosshairfeedback("<p>Du skal ændre modellen mere drastisk for at afgive et svar</p>")}}function crosshairfeedback(e){microhint($(".btn_sektor"),e,!0,"#000"),console.log($("#myCanvas").offset().left);var r=crosshair.position.x+$("#myCanvas").offset().left-$(".microhint").width()/2-10,t=crosshair.position.y+$("#myCanvas").offset().top+40;$(".microhint").css("left",r).css("top",t),$(".microhint").click(function(){poseQuestion(runde,opgavetype)})}function tjeksvar2(){var e=30,r=posAngle(null,null),t=r.svarVinkel,s=r.msg_obj,n=r.msg_compass;studerendeHarSvaretKorrekt=!1;var i=jsonData.spm_tiltag[runde].korrekt_svar_ny;for(var a in i)if(i[a]-e<=t&&t<i[a]+e){studerendeHarSvaretKorrekt=!0;break}console.log("tjeksvar2 - runde: "+runde+", svarVinkel: "+t+", svarVinkler: "+i),studerendeHarSvaretKorrekt?(console.log("tjeksvar2 - TRUE"),UserMsgBox("body",'<h3>Du har svaret <span class="label label-success">Korrekt!</span> </h3>'+jsonData.spm_tiltag[runde].feedback_korrekt+'<span class="btn btn-lg btn-primary btn-goOn">GÅ VIDERE</span>'),project.activeLayer.removeChildren(),drawTriangle(.75,.43),areasPct.start={civil:venstre_pct,marked:hojre_pct,stat:top_pct},draw_draggable(),runde++,$(".success").html(runde),runde>=jsonData.spm_tiltag.length?($(".MsgBox_bgr").addClass("MsgBox_goToFeedback"),$("#UserMsgBox").addClass("MsgBox_goToFeedback"),$(".btn-goOn").html("Læs mere om modellerne")):($(".MsgBox_bgr").addClass("MsgBox_nextQuestion"),$("#UserMsgBox").addClass("MsgBox_nextQuestion"))):(console.log("tjeksvar2 - FALSE"),crosshairfeedback('<div class="microhint_label_danger">Forkert</div> Hint: du har trukket cirklen i '+n+"lig retning, dvs. gjort arealet af civilsamfundet "+s.civil+", markedet "+s.marked+" og staten "+s.stat+". "+jsonData.spm_tiltag[runde].hint_retning)),++attempt,$(".attempt").html(attempt)}function posAngle(e,r){var e=cordEnd[1]-cordStart[1],r=cordEnd[0]-cordStart[0];console.log("\nposAngle - Dx: "+e+", Dy: "+r);var t=180*Math.atan(Math.abs(r)/Math.abs(e))/Math.PI;console.log("posAngle - ax 1: "+t);var s,n;e>0&&r>0&&(t=t),e<0&&r>0&&(t=180-t),e<0&&r<0&&(t=180+t),e>0&&r<0&&(t=360-t),e<0&&0==r&&(t=180),0==e&&r<0&&(t=270);for(var i=361,a=null,o=0;o<=8;o++)Math.abs(45*o-t)<i&&(i=Math.abs(45*o-t),a=45*o);return console.log("posAngle 1 - FINAL - a : "+t+", minVal: "+i+", minValAngle: "+a),a=360==a?0:a,console.log("posAngle 2 - FINAL - a : "+t+", minVal: "+i+", minValAngle: "+a),console.log("posAngle - msg_compass: "+s),console.log("posAngle - msg_obj: "+JSON.stringify(n)),console.log("posAngle - areasPct: "+JSON.stringify(areasPct)),console.log("posAngle - areaDiff - civil: "+String(areasPct.end.civil-areasPct.start.civil)+", marked: "+String(areasPct.end.marked-areasPct.start.marked)+", stat: "+String(areasPct.end.stat-areasPct.start.stat)),console.log("posAngle - drawTriangle - top_pct: "+top_pct+", venstre_pct: "+venstre_pct+", hojre_pct: "+hojre_pct),0==a&&(s="øst",n={civil:"større",marked:"mindre",stat:"uændret"}),45==a&&(s="syd-øst",n={civil:"uændret",marked:"mindre",stat:"større"}),90==a&&(s="syd",n={civil:"mindre",marked:"mindre",stat:"større"}),135==a&&(s="syd-vest",n={civil:"mindre",marked:"uændret",stat:"større"}),180==a&&(s="vest",n={civil:"mindre",marked:"større",stat:"uændret"}),225==a&&(s="nord-vest",n={civil:"uændret",marked:"større",stat:"mindre"}),270==a&&(s="nord",n={civil:"større",marked:"større",stat:"mindre"}),315==a&&(s="nord-øst",n={civil:"større",marked:"uændret",stat:"mindre"}),{svarVinkel:t,msg_compass:s,msg_obj:n}}function calcAreaDiffs(){.433012702*toppos}var canvas_height,canvas_width,ratio,top,hojre,venstre,triangle,dragarea,shadow_triangle_clone,statsdifference,civildifference,markedsdifference,crosshair,crosshair_clone,streg,top_pct,venstre_pct,hojre_pct,runde=0,universel_values=[56,18,26],cordStart=[],cordEnd=[],areasPct={start:{civil:null,marked:null,stat:null},end:{civil:null,marked:null,stat:null}},studerendeHarSvaretKorrekt=!1,runde_old=0,attempt=0;$(window).resize(function(){project.activeLayer.removeChildren(),ajustCanvas(),drawTriangle(.75,.43),areasPct.start={civil:venstre_pct,marked:hojre_pct,stat:top_pct},draw_draggable()}),$(document).ready(function(){$(".instr_container").html(instruction(jsonData.userInterface.instruktion)),$("#explanationWrapper").html(explanation(jsonData.userInterface.explanation)),jsonData.spm_tiltag=shuffle_Array(jsonData.spm_tiltag),$(".numOfQuestions").text(jsonData.spm_tiltag.length),poseQuestion(runde),crosshairfeedback("Ryk den grønne cirkel væk fra den sektor, der bliver styrket og hen imod den sektor, der svækkes, så felterne bliver enten større eller mindre."),$(".opgave_broedtxt:visible").addClass("microhint_target"),$(".opgave_broedtxt:hidden").removeClass("microhint_target"),microhint($(".microhint_target"),"Her finder du opgaverne",!0,"#000"),microhint($(".btn_model"),"Start med at læse om de tre modeller",!0,"#000")}),$(".btn_model").click(function(){var e,r=$(this).index();0==r?(e="Universel",UserMsgBox("body",'<h1>Den universelle model</h1> <div class="textImg col-xs-12 col-sm-6"><img class="img-responsive msbox_pic" src="img/universel.png"></div> <p>Denne velfærdsmodel er udbredt i de skandinaviske lande. Ideologisk er den tættest på en socialdemokratisk tankegang. Når modellen karakteriseres som universel, så skyldes det, at alle har rettigheder og pligter. Det første betyder at alle har ret til fx gratis uddannelse, sundhed og folkepension, og det sidste, at alle har pligt til at betale skat - også arbejdsløse og studerende.</p><h4>Statens rolle</h4><p>Staten spiller den væsentligste rolle i omfordelingen af velfærdsgoder, og der sker en høj omfordeling fra økonomisk velstillede til mindre velstillede. Modellen er skattefinansieret, og de mest velstillede betaler mest i skat. Det kaldes også for progressiv beskatning. Dermed forsøger modellen at udligne de største økonomiske forskelle, og den stræber efter at skabe lige muligheder for alle i samfundet. For eksempel har alle garanteret et socialt sikkerhedsnet.</p><h4>Markedets rolle</h4><p>Markedets rolle er ikke så betydningsfuld, men markedet kan supplere den offentlige velfærd ved at tilbyde privatforsikringer eller udbyde fx private børnehaver og skoler. Disse supplerer eller konkurrerer med dele af den offentlige velfærd. Mange af de private institutioner modtager en vis økonomisk støtte fra staten.</p><h4>Civilsamfundets rolle</h4><p>Civilsamfundets rolle er ikke så betydningsfuld, men på udvalgte områder. Fx er udbetaling af kontanthjælp ændret fra at være individuelt tildelt til i dag at være baseret på gensidig forsørgerpligt. Også frivillige organisationer som Kirkens Korshær kan hjælpe/supplere den offentlige velfærd i forhold til folk, der er i absolut nød. Frivillige foreninger kan stå for besøgsvennetjenester til ensomme, de kan udføre et arbejde i idrætsforeninger osv. Mange af de frivillige organisationer modtager en vis økonomiske støtte fra staten.</p><h4>Modellens udvikling</h4><p>Den danske universelle velfærdsmodel begyndte at blive rettighedsbaseret pga Kanslergadeforliget i 1933. Den økonomiske krise synliggjorde at arbejdsløshed og fattigdom skyldtes samfundsmæssige forhold. Modellen blev især videreudbygget på baggrund af den økonomiske højkonjunktur i 1960-erne. Kvinderne begyndte for alvor at indtage arbejdsmarkedet. Den ændrede familiestruktur med begge familier på arbejdsmarkedet skabte bl.a. behov for børnepasning og ældrepleje - opgaver som tidligere var familiens ansvar. Sammenlignet med de fleste andre lande i verden er den offentlige sektor i Danmark meget stor og med mange ansatte.</p><p>Igennem de senere år er modellen blevet mere behovsreguleret. Det vil sige at personer, der skønnes ikke at have behov for en ydelse, mister retten til at modtage denne. For eksempel kan mere velstillede familier ikke længere modtage en børnecheck. Dermed er modellen i dag mindre universel end tidligere. Flere principper fra den korporative og residuale model er indført.</p><h4>En børnefamilie i Danmark</h4><p>En typisk børnefamilie i Danmark vil have børn, der går i en offentlig vuggestue, børnehave (begge med en mindre brugerbetaling) eller folkeskole - og videre frem i en offentlig uddannelsesinstitution og modtager SU. Kvinders erhvervsfrekvens er næsten lige så høj som mændenes. Begge forældre arbejder. De betaler relativt en høj skat, men har modsat lave privatudgifter til bl.a. børnenes institutioner og sundhed. Når familien har brug for at gå til lægen eller komme på hospitalet er dette gratis, og de modtager dagpenge i perioder med arbejdsløshed. Den ældste datter er begyndt et frivilligt arbejde som besøgsven hos en ensom pensionist. </p>')):1==r?(e="Residual",UserMsgBox("body",'<h1>Den residuale model</h1> <div class="textImg col-xs-12 col-sm-6"><img class="img-responsive msbox_pic" src="img/liberal.png"></div> <p>Denne velfærdsmodel er udbredt i USA, men også England, Irland og Australien har ladet sig inspirere af modellen. Ideologisk er den tættest på liberalismen. Residual betyder "resterende" eller "tilbageblevne". Det er altså den såkaldte restgruppe eller de svageste i samfundet, der er berettiget til at modtage offentlig velfærd.</p><h4>Statens rolle</h4><p>Statens rolle er begrænset og kun personer som er uarbejdsdygtige på grund af sygdom eller handicap har ret til offentlig hjælp. Men kun i det omfang familien ikke kan klare forsørgelsen. Dermed sker der en lav omfordeling af goderne, og modellen har ikke til hensigt at forhindre ulighed. Dette skyldes, at ulighed af liberalisterne ses som en nødvendig drivkraft i samfundet. Skatten er derfor lav, og staten skal holde sig fra opgaver som markedet og borgerne selv kan løse.</p><h4>Markedets rolle</h4><p>I denne model spiller markedet den væsentligste rolle i fordelingen af velfærd. Derfor er skatten lav, men den enkelte kan have høje udgifter til private børnehaver, skoler og til andre private uddannelser. Modellen er stærkt individorienteret, idet det er op til borgeren selv at sammensætte sine velfærdsordninger via private forsikringer, så de passer til egne individuelle behov. Afhængig af indkomst vil den enkelte have forskellige muligheder for at købe en ringere eller en bedre forsikring. Fx vil meget velstillede kunne forsikre sig ind på de bedste hospitaler.</p><h4>Civilsamfundets rolle</h4><p>Civilsamfundet kommer i nogen grad til at spille en rolle, idet dem, der ikke har nogen privatforsikring, ofte må søge støtte i civilsamfundet, da de offentlige ydelser ofte er utilstrækkelige. De civile eller frivillige organisationer står fx for uddeling af mad og tøj. I USA er det udbredt at borgere donerer til civilsamfundet.</p><h4>Børnefamilie i USA</h4><p>En typisk børnefamilie i USA vil helst have, at deres børn går i private institutioner, da kvaliteten er betydeligt højere end i de offentlige. Skatten er ikke så høj, men da udgiften til de private institutioner kan være betydelig, vælger en del familier, at (typisk) moderen går hjemme og passer børnene de første år. Familien er også privatforsikret mod sygdom, dog ikke på de bedste hospitaler, men niveauet er højere end på de offentlige hospitaler. Begge forældre er også forsikret mod arbejdsløshed, men de har endnu ikke råd til at spare op til pensionen. Dette håber forældrene at få råd til, når børnene er flyttet hjemmefra og ikke længere udgør en betydelig udgift. Moren og den ældste datter udfører hver søndag socialt frivilligt arbejde i den lokale baptistkirke, hvor de hjælper med at uddele mad og tøj til folk i nød. </p>')):2==r&&(e="Selektiv",UserMsgBox("body",'<h1>Den korporative/selektive model </h1><div class="textImg col-xs-12 col-sm-6"><img class="img-responsive msbox_pic" src="img/konservativ.png"></div><p>Denne velfærdsmodel er udbredt i lande som Tyskland, Frankrig og Østrig. Derfor kaldes den også for den Centraleuropæiske model. Ideologisk er den tættest på konservatismen. Når modellen betegnes som "korporativ", så skyldes det, at både arbejdsgiver, lønmodtager, men også ofte staten, i fællesskab indbetaler til obligatoriske forsikringsordninger. Dermed forsikres hele familien mod fyring og sygdom. Når modellen betegnes som "selektiv", så henvises der til, at de obligatoriske forsikringsordninger giver social sikkerhed til de "udvalgte grupper" med fast tilknytning til arbejdsmarkedet.</p><p>Det konservative aspekt ved modellen ses netop ved, at familien spiller en central rolle i tildelingen af velfærdsrettigheder, og ved at modellen ikke har til hensigt at udligne sociale forskelle men at sikre familiens økonomiske status, idet forsikringsdækningen vokser med indkomsten. Omfordelingen mellem de bedrestillede og de dårligt stillede er moderat. Tildelingen af velfærd er således baseret på hele familien – ikke på individet som i den universelle og residuale model.</p><h4>Statens rolle</h4><p>Staten spiller en begrænset rolle. Den yder tilskud til de obligatoriske forsikringsordninger til personer med fast tilknytning til arbejdsmarkedet. Desuden yder staten offentlig velfærd til personer, der står udenfor arbejdsmarkedet og som ikke får hjælp af civilsamfundet.</p><h4>Markedets rolle</h4><p>Markedet har i nogen grad en rolle, idet det løser borgeres behov for velfærd gennem forsikringsordninger. Dette gøres specielt for borgere, der er fast tilknyttet arbejdsmarkedet. Borgere, der ikke har råd til at købe forsikringer, må søge hjælp i civilsamfundet eller staten.</p><h4>Civilsamfundets rolle</h4><p>Civilsamfundet spiller en betydelig rolle. Det er først og fremmest familien, der skal løse problemerne ved velfærdstab, fx er der gensidig forsørgerpligt, hvis kun den ene part er på arbejdsmarkedet. Kan dette ikke lade sig gøre, så er det velgørende organisationer, kirken og eventuelt staten, der påtager sig rollen. Dette kaldes også for subsidiaritetsprincippet eller nærhedsprincippet. Dette går ud på, at problemer skal løses så tæt på borgeren som muligt. Dermed spiller tilknytning til arbejdsmarkedet og civilsamfundet en fremtrædende rolle i lande med denne konservative velfærdsmodel. Borgere med ingen eller ringe tilknytning til arbejdsmarkedet, og som ikke kan hjælpes af civilsamfundet/familien, kan opleve en ringe grad af velfærd.</p><h4>En børnefamilie i Tyskland</h4><p>En typisk børnefamilie i Tyskland vil forsøge at få deres børn i private uddannelsesinstitutioner, da disse har en højere kvalitet end de offentlige. Skatten er ikke så høj, men familien har relativt høje udgifter til de obligatoriske virksomhedsforsikringer og udgifter til de private uddannelsesinstitutioner. Derfor vælger (typisk) moren at gå hjemme og passe børnene i deres første leveår. Faren har en gennemsnitsindkomst og har dermed obligatoriske forsikringer, der betyder at hele familien har adgang til privathospitaler på mellemniveau. Familien har også en obligatorisk pensionsopsparing på mellemniveau. Familien bruger en del af ugens timer på at tage sig af bedsteforældrene. Når moren har overskud hjælper hun til i en katolsk kirke, der uddeler mad til personer uden arbejde. </p>'))}),$(".btn_sektor").click(function(){var e=$(this).index();console.log("btn_sektor - indeks: "+e),1==e?UserMsgBox("body","<h2>Stat</h2><p>Staten varetager en stor del af serviceydelserne og omfordelingen i det danske samfund. Det gælder fx i den offentlige sektor i forhold til sundhed, uddannelse og social sikkerhed. Den offentlige sektor bliver finansieret via skatter og afgifter.</p> <p>Centrale aktører i staten er regering, folketinget, kommunalbestyrelser og regioner. I staten bliver love og regler vedtaget via politiske beslutninger. De politiske beslutninger bliver afgjort af partier og andre aktørers magt og holdninger. Ofte bliver fordelingen af velfærdsydelser reguleret af rettigheder og pligter.</p>"):2==e?UserMsgBox("body","<h2>Marked</h2>Markedet er den arena, hvor varer og tjenesteydelser bliver handlet. Virksomheder og forbrugere er de væsentligste aktører og den væsentligste drivkraft er at tjene penge og at købe produkter og serviceydelser. Private virksomheder producerer også fx uddannelse, sundhed og forsikringer. Alt omregnes til pengeværdier og markedsmekanismen (udbud og efterspørgsel) er med til at sætte prisen.  "):3==e&&UserMsgBox("body","<h2>Civilsamfund</h2>Civilsamfundet omfatter familien, netværk, frivillige foreninger og ikke-statslige fællesskaber og organisationer. Hvis civilsamfundet er afgørende for produktion og fordeling af velfærdsgoder, er det derfor i høj grad styret af følelser fx kærlighed, venskab, solidaritet eller moral, altså uformelle værdier og normer.")}),$(document).on("click touchend",".microhint",function(e){$(this).fadeOut(400).remove()}),$(document).on("click",".MsgBox_goToFeedback",function(e){$(".MsgBox_bgr").remove(),UserMsgBox_xclick("body",jsonData.userInterface.slutfeedback),$(".MsgBox_bgr").hide().fadeIn(400)}),$(document).on("click",".MsgBox_nextQuestion",function(e){$(".opgTekst").fadeOut(400,function(){poseQuestion(runde,opgavetype),$(".opgTekst").hide().fadeIn(1e3)})});